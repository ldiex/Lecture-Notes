# 图像变换
## 欧式变换, 相似变换, 仿射变换, 投影变换的自由度
### 齐次坐标
齐次坐标是对笛卡尔坐标的一种扩展, 允许我们使用矩阵运算来表示各种几何变换. 对于二维空间中的点 $(x, y)$, 其齐次坐标表示为 $(x, y, w)$, 其中 $w$ 是一个非零的缩放因子. 通常情况下, 我们可以将 $w$ 设为 $1$, 这样点 $(x, y)$ 在齐次坐标中表示为 $(x, y, 1)$

### 欧式变换
欧式变换包括平移和旋转, 它们保持距离和角度不变. 在二维空间中, 欧式变换可以表示为一个 $3 \times 3$ 矩阵, 其形式如下:
$$
\begin{bmatrix}
\cos \theta & -\sin \theta & t_x \\
\sin \theta & \cos \theta & t_y \\  
0 & 0 & 1
\end{bmatrix}
$$
它的自由度为 $3$, 包括一个旋转角度 $\theta$ 和两个平移参数 $t_x, t_y$.

### 相似变换
相似变换包括欧式变换和缩放, 它们保持形状但不保持大小. 在二维空间中, 相似变换可以表示为一个 $3 \times 3$ 矩阵, 其形式如下:
$$
\begin{bmatrix}
s\cos \theta & -s\sin \theta & t_x \\
s\sin \theta & s\cos \theta & t_y \\  
0 & 0 & 1
\end{bmatrix}
$$
它的自由度为 $4$, 包括一个缩放因子 $s$, 一个旋转角度 $\theta$ 和两个平移参数 $t_x, t_y$.

### 仿射变换
仿射变换包括相似变换和剪切, 它们保持直线和平行关系. 在二维空间中, 仿射变换可以表示为一个 $3 \times 3$ 矩阵, 其形式如下:
$$
\begin{bmatrix}
a_{11} & a_{12} & t_x \\
a_{21} & a_{22} & t_y \\  
0 & 0 & 1
\end{bmatrix}
$$
它的自由度为 $6$, 包括四个线性变换参数 $a_{11}, a_{12}, a_{21}, a_{22}$ 和两个平移参数 $t_x, t_y$.

### 投影变换
投影变换包括仿射变换和透视效果, 它们可以改变直线和平行关系. 在二维空间中, 投影变换可以表示为一个 $3 \times 3$ 矩阵, 其形式如下:
$$
\begin{bmatrix}
h_{11} & h_{12} & h_{13} \\
h_{21} & h_{22} & h_{23} \\
h_{31} & h_{32} & h_{33}
\end{bmatrix}
$$
它的自由度为 $8$, 包括八个独立的参数 $h_{11}, h_{12}, h_{13}, h_{21}, h_{22}, h_{23}, h_{31}, h_{32}$ (注意 $h_{33}$ 通常设为 $1$ 以避免齐次坐标的缩放不确定性).

### 3D 空间中的变换的自由度
- 欧式变换: $6$ (3 个平移参数 + 3 个旋转参数)
- 相似变换: $7$ (6 个欧式变换参数 + 1 个缩放参数)
- 仿射变换: $12$ ($4 \times 4$ 的矩阵, 但最后一行通常为 $[0, 0, 0, 1]$, 因此有 $12$ 个自由度)
- 投影变换: $15$ ($4 \times 4$ 的矩阵, 但最后一行通常为 $[h_{41}, h_{42}, h_{43}, 1]$, 因此有 $15$ 个自由度)

## 相关和卷积
### 定义
对于二维离散信号 (图像) $f(m, n)$ 和 $h(m, n)$, 它们的相关 (correlation) 和卷积 (convolution) 定义如下:
- 相关:
$$
(f \star h)(m, n) = \sum_{j} \sum_{k} f(m+j, n+k) h(j, k)
$$
- 卷积:
$$
(f * h)(m, n) = \sum_{j} \sum_{k} f(m+j, n+k) h(-j, -k)
$$
或者写成
$$
(f * h)(m, n) = \sum_{j} \sum_{k} f(m-j, n-k) h(j, k)
$$

